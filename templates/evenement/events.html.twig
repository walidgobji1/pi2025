{% extends 'base.html.twig' %}

{% block title %}Liste des événements{% endblock %}

{% block body %}
<div class="container mt-5">
    <h2 class="text-center font-bold text-2xl mb-4">Liste des événements</h2>

    <!-- Formulaire de recherche -->
    <div class="mb-4 flex justify-center">
        <input type="text" id="searchInput" placeholder="Rechercher par titre"
            class="p-2 border rounded-lg w-1/3">
    </div>

    <div class="row" id="eventsContainer">
        {% for evenement in evenements %}
            <div class="col-md-4 mb-4 event-item">
                <div class="card shadow-lg rounded-lg transform transition hover:scale-105 hover:shadow-xl">
                    <img src="{{ asset('uploads/photos/' ~ evenement.photo) }}" class="card-img-top object-cover"
                        alt="Image de l'événement">
                    <div class="card-body">
                        <h5 class="card-title font-bold">{{ evenement.titre }}</h5>
                        <p class="card-text text-gray-700">{{ evenement.description|slice(0, 100) }}...</p>
                        <p class="text-sm text-gray-500">Date : {{ evenement.date|date('d/m/Y') }}</p>
                        <a href="{{ path('app_evenement_show', {'id': evenement.id}) }}" class="btn btn-primary w-full">
                            Voir les détails
                        </a>
                    </div>
                </div>
            </div>
        {% else %}
            <p class="text-center text-gray-600 w-full">Aucun événement trouvé.</p>
        {% endfor %}
    </div>
</div>

<script>
    document.getElementById("searchInput").addEventListener("input", function () {
        let searchValue = this.value.toLowerCase();
        let events = document.querySelectorAll(".event-item");

        events.forEach(event => {
            let title = event.querySelector(".card-title").innerText.toLowerCase();
            if (title.includes(searchValue)) {
                event.style.display = "block";
            } else {
                event.style.display = "none";
            }
        });
    });
</script>

{% endblock %}
