{% extends 'base.html.twig' %}

{% block body %}
    <h2>Donner votre avis</h2>

    <form action="{{ path('avis_new') }}" method="post">
        <!-- Système de notation à 5 étoiles -->
        <div class="star-rating">
            {% for i in 1..5 %}
                <span class="star" data-value="{{ i }}">★</span>
            {% endfor %}
            <input type="hidden" name="note" id="note" value="0">
        </div>

        <!-- Champ de commentaire -->
        <div>
            <label for="commentaire">Commentaire :</label>
            <textarea name="commentaire" id="commentaire" required></textarea>
        </div>

        <!-- Bouton de soumission -->
        <button type="submit">Envoyer</button>
    </form>

    <script>
        // Script pour gérer les étoiles interactives
        document.addEventListener("DOMContentLoaded", function () {
            const stars = document.querySelectorAll(".star");
            const noteInput = document.getElementById("note");

            stars.forEach(star => {
                star.addEventListener("click", function () {
                    let value = this.getAttribute("data-value");
                    noteInput.value = value;

                    // Mettre à jour l'affichage des étoiles
                    stars.forEach(s => s.classList.remove("selected"));
                    this.classList.add("selected");

                    // Colorer toutes les étoiles précédentes
                    let previous = this.previousElementSibling;
                    while (previous) {
                        previous.classList.add("selected");
                        previous = previous.previousElementSibling;
                    }
                });
            });
        });
    </script>

    <style>
        .star {
            font-size: 30px;
            cursor: pointer;
            color: #ccc;
        }

        .star.selected {
            color: gold;
        }

        textarea {
            display: block;
            width: 100%;
            height: 100px;
            margin-top: 10px;
        }
    </style>
{% endblock %}
